<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>epage's blog</title>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-3dkvEK0WLHRJ7/Csr0BZjAWxERc5WH7bdeUya2aXxdU= sha512-+L4yy6FRcDGbXJ9mPG8MT/3UCDzwR9gPeyFNMCtInsol++5m3bk2bXWKdZjvybmohrAsn3Ua5x8gfLnbE1YkOg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
<link rel="stylesheet" href="/style.css" type="text/css" media="all" />
<link rel="alternate" href="/rss.xml" type="application/rss+xml" title="RSS" />

	</head>
	<body>
		<nav class="container-fluid">
			<ul>
				<li><h2>epage's blog</h2></li>
			</ul>
		</nav>
		<main class="container">
			
<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2022/06/clap-32-last-call-before-40/">Clap 3.2: Last Call Before 4.0</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Mon&nbsp;13&nbsp;Jun&nbsp;'22</time>
			
		</li></ul>
	</nav>
	
	<p><p>With excitement and trepidation, I'm announcing the release of
<a href="https://github.com/clap-rs/clap/blob/master/CHANGELOG.md">clap 3.2</a>.</p>
<p>With clap 3.1, we <a href="https://epage.github.io/blog/2022/02/clap-31-a-step-towards-40/">discussed the need for a more open, extensible
API</a> and clap
3.2 represents one step in that direction.  With two new builder API concepts,
we are able to deprecate the following concepts:</p>
<ul>
<li><code>Arg::allow_invalid_utf8</code></li>
<li><code>Arg::validator</code>, <code>Arg::validator_os</code></li>
<li><code>Arg::forbid_empty_values</code></li>
<li><code>Arg::possible_values</code></li>
<li><code>Arg::max_occurrences</code></li>
<li><code>Arg::multiple_occurrences</code></li>
<li><code>Command::args_override_self</code></li>
<li><code>AppSettings::NoAutoVersion</code></li>
<li><code>AppSettings::NoHelpVersion</code></li>
</ul>
<h3>Introducing <code>Arg::value_parser</code></h3>
<p>The derive API has had to deal with adapting raw <code>OsString</code>s into the user's
type.  We did this via the
<a href="https://github.com/clap-rs/clap/tree/master/examples/derive_ref#arg-types"><code>#[clap(parse(...)]</code> attribute</a>.</p>
<p>In place of the <code>parse</code> attribute, the Builder API had</p>
<ul>
<li>Native support for <code>str</code> (<code>value_of</code>) and <code>str</code> (<code>value_of_os</code>, <code>value_of_os_lossy</code>) with various built-in validators</li>
<li>Support for <code>FromStr</code> types (<code>value_of_t</code>) which produced a lower quality error message than native validation would</li>
</ul>
<p><code>Arg::value_parser</code> brings the derive API's typing to the builder API.  We've
ported some of the built-in validators to this new API, added new ones, and
made it convenient to lookup the best value parser for a given type.  For
example:</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> cmd = clap::Command::new(&quot;</span><span style="color:#a3be8c;">raw</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">arg</span><span style="color:#c0c5ce;">(
</span><span style="color:#c0c5ce;">        clap::Arg::new(&quot;</span><span style="color:#a3be8c;">color</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">long</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">color</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">value_parser</span><span style="color:#c0c5ce;">([&quot;</span><span style="color:#a3be8c;">always</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">auto</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">never</span><span style="color:#c0c5ce;">&quot;])
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">default_value</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">auto</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">    )
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">arg</span><span style="color:#c0c5ce;">(
</span><span style="color:#c0c5ce;">        clap::Arg::new(&quot;</span><span style="color:#a3be8c;">hostname</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">long</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">hostname</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">value_parser</span><span style="color:#c0c5ce;">(clap::builder::NonEmptyStringValueParser::new())
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">takes_value</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">true</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">required</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">true</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">    )
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">arg</span><span style="color:#c0c5ce;">(
</span><span style="color:#c0c5ce;">        clap::Arg::new(&quot;</span><span style="color:#a3be8c;">port</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">long</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">port</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">value_parser</span><span style="color:#c0c5ce;">(clap::value_parser!(</span><span style="color:#b48ead;">u16</span><span style="color:#c0c5ce;">).</span><span style="color:#96b5b4;">range</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">3000</span><span style="color:#c0c5ce;">..))
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">takes_value</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">true</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">required</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">true</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">    );
</span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> m = cmd.</span><span style="color:#96b5b4;">try_get_matches_from</span><span style="color:#c0c5ce;">(
</span><span style="color:#c0c5ce;">    [&quot;</span><span style="color:#a3be8c;">cmd</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">--hostname</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">rust-lang.org</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">--port</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">3001</span><span style="color:#c0c5ce;">&quot;]
</span><span style="color:#c0c5ce;">).</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> color: &amp;String = m.</span><span style="color:#96b5b4;">get_one</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">color</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">expect</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">defaulted</span><span style="color:#c0c5ce;">&quot;);
</span><span style="color:#c0c5ce;">assert_eq!(color, &quot;</span><span style="color:#a3be8c;">auto</span><span style="color:#c0c5ce;">&quot;);
</span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> hostname: &amp;String = m.</span><span style="color:#96b5b4;">get_one</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">hostname</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">expect</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">required</span><span style="color:#c0c5ce;">&quot;);
</span><span style="color:#c0c5ce;">assert_eq!(hostname, &quot;</span><span style="color:#a3be8c;">rust-lang.org</span><span style="color:#c0c5ce;">&quot;);
</span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> port: </span><span style="color:#b48ead;">u16 </span><span style="color:#c0c5ce;">= *m.</span><span style="color:#96b5b4;">get_one</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">port</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">expect</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">required</span><span style="color:#c0c5ce;">&quot;);
</span><span style="color:#c0c5ce;">assert_eq!(port, </span><span style="color:#d08770;">3001</span><span style="color:#c0c5ce;">);
</span></pre>
<p>While updating the <code>ArgMatches</code> API for this, we took the time to make other improvements:</p>
<ul>
<li>Not-present values are represented with an <code>Option</code> while before some calls
used an <code>Option</code> while some used a <code>Result</code>
(<a href="https://github.com/clap-rs/clap/issues/2505">#2505</a>)</li>
<li><code>ArgMatches</code> functions panic when the argument value access doesn't match the
argument definition but now we offer non-panicking variants
(<a href="https://github.com/clap-rs/clap/issues/3621">#3621</a>)</li>
</ul>
<h3>Introducing <code>ArgAction</code></h3>
<p>Clap would infer how to process an argument when parsing.  There are cases
where it doesn't quite do what users want and we need to offer more explicit
control.  This is now done by specifying an <code>ArgAction</code>.  For now, this is a closed
API but we hope to allow users to provide their own actions in the future as we
firm up how it interacts with the parser.</p>
<p>As part of how clap processed arguments, it special-cased flags to not store any value but instead
users would just check if the flag was present or how many times the flag
appeared.  This makes it so flags don't interact well with other parts of the
API (e.g.
<a href="https://docs.rs/clap/latest/clap/struct.Arg.html#method.default_value_if"><code>default_value_if</code></a>).
In place of the old <code>ArgAction::IncOccurrences</code>, we are providing
<code>ArgAction::SetTrue</code> and <code>ArgAction::Count</code> which will store their results
as-if the user specified them on the command-line, allowing them to interact
with the rest of clap's API without special casing.</p>
<p>For example:</p>
<pre style="background-color:#2b303b;">
<span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> cmd = Command::new(&quot;</span><span style="color:#a3be8c;">mycmd</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">arg</span><span style="color:#c0c5ce;">(
</span><span style="color:#c0c5ce;">        Arg::new(&quot;</span><span style="color:#a3be8c;">quiet</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">long</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">quiet</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">action</span><span style="color:#c0c5ce;">(clap::builder::ArgAction::SetTrue)
</span><span style="color:#c0c5ce;">    )
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">arg</span><span style="color:#c0c5ce;">(
</span><span style="color:#c0c5ce;">        Arg::new(&quot;</span><span style="color:#a3be8c;">verbose</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">long</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">verbose</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">action</span><span style="color:#c0c5ce;">(clap::builder::ArgAction::Count)
</span><span style="color:#c0c5ce;">    );
</span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> matches = cmd.</span><span style="color:#96b5b4;">try_get_matches_from</span><span style="color:#c0c5ce;">(
</span><span style="color:#c0c5ce;">    [&quot;</span><span style="color:#a3be8c;">mycmd</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">--quiet</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">--quiet</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">--verbose</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">--verbose</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">--verbose</span><span style="color:#c0c5ce;">&quot;]
</span><span style="color:#c0c5ce;">).</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;"> assert_eq!(
</span><span style="color:#c0c5ce;">     *matches.get_one::&lt;</span><span style="color:#b48ead;">bool</span><span style="color:#c0c5ce;">&gt;(&quot;</span><span style="color:#a3be8c;">quiet</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">expect</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">defaulted by clap</span><span style="color:#c0c5ce;">&quot;),
</span><span style="color:#c0c5ce;">     Some(</span><span style="color:#d08770;">true</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;"> );
</span><span style="color:#c0c5ce;"> assert_eq!(
</span><span style="color:#c0c5ce;">     *matches.get_one::&lt;</span><span style="color:#b48ead;">u8</span><span style="color:#c0c5ce;">&gt;(&quot;</span><span style="color:#a3be8c;">verbose</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">expect</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">defaulted by clap</span><span style="color:#c0c5ce;">&quot;),
</span><span style="color:#c0c5ce;">     Some(</span><span style="color:#d08770;">3</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;"> );
</span></pre>
<p>In working on actions, we realized we could simplify things if we made
<code>Command::args_override_self</code> the default and used actions to decide whether
each new occurrence overrode prior occurrences (<code>ArgAction::Set</code>) or appended
to them (<code>ArgAction::Append</code>).</p>
<h3>Parsers and Actions for the Derive API</h3>
<p>While all of the above is a major departure from the builder API, this is less
impactful for the derive API because we know more about the user's intent. A
user can opt-in to the new behavior by providing a default action
(<code>#[clap(action)]</code>) or default value parser (<code>#[clap(value_parser)]</code>).  Default
actions will be inferred from the data type while the parser will defer to
<code>clap::value_parser!(T)</code> for the default.  This means users no longer need to
remember to special case the parse attribute for <code>PathBuf</code> and the value will
only be parsed once and stored rather than thrown away during validation.</p>
<p>This behavior will become the default in clap 4.0.</p>
<h3>Multicall and REPLs</h3>
<p>On a completely unrelated note, we are stablizing <code>Command::multicall</code>.  This
new setting will cause the binary name (<code>argv[0]</code>) to be parsed as a
subcommand.  This allows for <a href="https://github.com/clap-rs/clap/blob/master/examples/multicall-busybox.rs">busybox-like
binaries</a>
where multiple programs are shipped in one binary with the personality being
selected based on a hardlink name.  We also found this works quite well for
<a href="https://github.com/clap-rs/clap/blob/master/examples/repl.rs">embedded command
promots</a>.</p>
<h3>Resolving Deprecations</h3>
<p>To help in resolving the deprecations, check out these example updates:</p>
<ul>
<li><a href="https://github.com/rust-lang/cargo/pull/10753">cargo</a> (Builder API)</li>
<li><a href="https://github.com/EmbarkStudios/cargo-deny/pull/431">cargo deny</a> (Derive API)</li>
</ul>
<p>However, we recommend people experiment with it and provide
<a href="https://github.com/clap-rs/clap/issues">feedback</a> but only commit if you are
happy with the results.  We'll process the feedback and see how much we need to
pivot with the API design introduce in clap 3.2.  When clap 4 is released, if
we didn't depart much, we'll recommend upgrading to clap 3.2 to ease the
migration to 4.0.  Otherwise, we'll work to help people upgrade to whatever
clap 4.0 look like.</p>
<p>I mentioned at the beginning some trepidation with this
release.  It is major departure from how clap has previously worked.  We might
have made mistakes in the design.  People might not like it.  We want clap to
be moving forward to be ready for the needs of new and existing users but we
don't want to alienate the users we already have.</p>
<p>Normally, to deal with uncertainty, we start with feature-gating new work but
these changes were invasive and it is difficult to gauge how successful a
change is that isn't in a stable release.  However, we are coming up on when we
can start on the clap 4.0 release and we can address any design sins then.
This gives us the opportunity to collect more feedback with slightly lower
risk.</p>
<h3>Results</h3>
<p>So did all of these changes help us meet our goal of improving compile times
and reducing binary size?  No,
<a href="https://github.com/rust-cli/argparse-benchmarks-rs">it made things worse</a> but
that was expected as we just added more to the API without taking anything out.
We are hoping that in clap 4.0 things will improve as we
<a href="https://github.com/clap-rs/clap/issues/3021">remove deprecated features</a>.
Even then, we do not expect major results as I suspect a lot of the binary size
comes from a design philosophy and it will take time slowly chipping away at it
until we have a more open API design.</p>
<h3>Next Steps</h3>
<p>Future areas of focus for improving out binary size and compile times include
<a href="https://github.com/clap-rs/clap/issues/3021">customizing error and help reporting and pluggable defaults and validation</a>.</p>
<p>Other focuses for clap 4.0 include:</p>
<ul>
<li><a href="https://github.com/clap-rs/clap/issues/1041">Removing lifetimes from the API</a></li>
<li><a href="https://github.com/clap-rs/clap/issues/2688">Simplify how the number of values are specified</a> and <a href="https://github.com/clap-rs/clap/issues/2687">be less magical about it</a></li>
<li>And <a href="https://github.com/clap-rs/clap/milestone/78">several more things</a></li>
</ul>
<p>We expect to let clap 3.2 settle for a month or so and then we'll get to work on clap 4.0.</p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2022/02/clap-31-a-step-towards-40/">clap 3.1: A step towards 4.0</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Wed&nbsp;16&nbsp;Feb&nbsp;'22</time>
			
			<br/><i class="fa fa-tags"></i> programming, rust
			
		</li></ul>
	</nav>
	
	<p><p><a href="https://docs.rs/clap/3.1.0">clap 3.1</a> is here!  Clap is a CLI argument parser
for Rust and the v3.1 releases focuses on API cleanup slated for clap 4.0.  See
the <a href="https://github.com/clap-rs/clap/blob/master/CHANGELOG.md">CHANGELOG</a> for
details.</p>
<p>clap 3.0 was in development for 4 years and though we saw comparisons to
Half-life 3 in response to the release, we also saw people who cited the long
gaps between breaking releases as a motivation for using it.  For clap to stay
relevant we feel we need to avoid the stagnation of long release cycles while
keeping things smooth for the users where clap is already &quot;good enough&quot;.  The
v3.1 release is a major step in trying to strike that balance.</p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2022/02/minor-semver-issue/">Minor Semver Issue</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Fri&nbsp;04&nbsp;Feb&nbsp;'22</time>
			
			<br/><i class="fa fa-tags"></i> programming, rust
			
		</li></ul>
	</nav>
	
	<p><p>Is adding a function in a patch release a violation of
<a href="https://semver.org/">semver</a>?  Technically, yes but technical answers aren't
always the right answers.</p>
<p>This came up in a recent discussion focused on the
relevant importance of setting the minimum patch version for a dependency.
Some crates go so far as to never bump their minor version, like
<a href="https://crates.io/crates/serde/versions">serde</a>.</p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2021/12/clap3/">clap 3.0, a Rust CLI argument parser</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Thu&nbsp;30&nbsp;Dec&nbsp;'21</time>
			
			<br/><i class="fa fa-tags"></i> programming, rust
			
		</li></ul>
	</nav>
	
	<p><p>I figured a great way to close out the year 2021 is to wrap up the long awaited
<a href="https://github.com/clap-rs/clap/blob/master/CHANGELOG.md#300-2021-12-31">clap 3.0 release</a>!</p>
<p>Some major milestones along the way:</p>
<ul>
<li>Jan 24, 2018: The <a href="https://github.com/clap-rs/clap/commit/acdbd47152102607b7f4c6702cc076caca771280">first commit in the v3-dev branch</a></li>
<li>Aug 30, 2019: <a href="https://github.com/TeXitoi/structopt/blob/master/CHANGELOG.md#v030-2019-08-30">StructOpt 0.3 is released</a> with better clap integration</li>
<li>May 03, 2021: <a href="https://github.com/clap-rs/clap/releases/tag/v3.0.0-beta.1">v3.0.0-beta.1 is released</a></li>
<li>Dec 08, 2021: <a href="https://github.com/clap-rs/clap/releases/tag/v3.0.0-rc.0">3.0.0-rc.0 is released</a></li>
<li>Dec 31, 2021: <a href="https://github.com/clap-rs/clap/releases/tag/v3.0.0">3.0.0 is released</a></li>
</ul>
<p>Thanks to:</p>
<ul>
<li>kbknapp, pksunkara, dpc, killercup, spacekookie, yosh, ldm0, and any other
maintainers or contributors along the way</li>
<li>Our users, especially those providing feedback on beta and release-candidates</li>
<li>Embark, Sentry, repi, and many other sponsors</li>
<li>My employer, Futurewei, for giving me the opportunity to help wrap up clap 3.0</li>
</ul>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2021/09/optimizing-toml-edit/">A Journey in Optimizing `toml_edit`</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Thu&nbsp;30&nbsp;Sep&nbsp;'21</time>
			
			<br/><i class="fa fa-tags"></i> programming, oss, rust
			
		</li></ul>
	</nav>
	
	<p><h2>tl;dr</h2>
<p><a href="https://docs.rs/toml_edit"><code>toml_edit</code></a> is a format preserving TOML crate,
allowing users to modify <code>.toml</code> files.</p>
<p><strong>Before:</strong></p>
<table><thead><tr><th></th><th><code>cargo init</code> Cargo.toml</th><th>cargo's Cargo.toml</th></tr></thead><tbody>
<tr><td>toml_edit</td><td>8.7us</td><td>271us</td></tr>
<tr><td>toml_edit::easy</td><td>20.7us</td><td>634us</td></tr>
</tbody></table>
<p><strong>After:</strong></p>
<table><thead><tr><th></th><th><code>cargo init</code> Cargo.toml</th><th>cargo's Cargo.toml</th></tr></thead><tbody>
<tr><td>toml_edit</td><td>4.0us</td><td>149us</td></tr>
<tr><td>toml_edit::easy</td><td>5.0us</td><td>179us</td></tr>
</tbody></table>
<p><strong>Target:</strong></p>
<table><thead><tr><th></th><th><code>cargo init</code> Cargo.toml</th><th>cargo's Cargo.toml</th></tr></thead><tbody>
<tr><td>toml-rs</td><td>4.7us</td><td>121us</td></tr>
</tbody></table>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2021/09/learning-rust/">Learnability of Rust</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Wed&nbsp;15&nbsp;Sep&nbsp;'21</time>
			
			<br/><i class="fa fa-tags"></i> programming, oss, rust
			
		</li></ul>
	</nav>
	
	<p><h2>tl;dr</h2>
<p>As part of improving the learnability of Rust, I propose:</p>
<ul>
<li>The <code>.crs</code> file subset of <a href="https://github.com/DanielKeep/cargo-script">cargo-script</a> be brought into <code>cargo</code></li>
<li>We support converting <code>.crs</code> to full cargo projects with <code>cargo init --from &lt;script&gt;.crs</code></li>
<li>We collaborate on an ergonomics-focused standard-library-alternative, like <a href="https://docs.rs/eztd">eztd</a></li>
</ul>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2021/07/pushgen-experiment/">Experiments with `pushgen`</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Wed&nbsp;07&nbsp;Jul&nbsp;'21</time>
			
			<br/><i class="fa fa-tags"></i> programming, rust
			
		</li></ul>
	</nav>
	
	<p><p>Recently, there was an <a href="https://www.reddit.com/r/rust/comments/oa6tcp/first_crate_pushgen_pushbased_approach_to/">announcement for
<code>pushgen</code></a>,
a port of C++ <code>transrangers</code> to Rust with a <a href="https://github.com/joaquintides/transrangers/blob/master/rust.md">follow up
post</a> from
the author of <code>transrangers</code>.</p>
<p>Seeing the performance numbers, I was curious what the experience was like with
the different techniques compared in the followup and how the performance
worked out in a real world application.</p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2020/03/liquid-v20/">Liquid v0.20</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Mon&nbsp;16&nbsp;Mar&nbsp;'20</time>
			
			<br/><i class="fa fa-tags"></i> programming, oss
			
		</li></ul>
	</nav>
	
	<p><p><code>liquid</code> v0.20 resolves several planned breaking changes we've been holding off on.  This doesn't make us ready for 1.0 yet but this closes the gap significantly.</p>
<p><em><a href="https://docs.rs/liquid"><code>liquid-rust</code></a> is a rust re-implementation of the <a href="https://shopify.github.io/liquid/">liquid</a> template engine made popular by the <a href="https://jekyllrb.com">jekyll</a> static site generator.</em></p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2019/11/reflecting-on-errors-in-2019/">Reflecting on Errors in 2019</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Tue&nbsp;26&nbsp;Nov&nbsp;'19</time>
			
		</li></ul>
	</nav>
	
	<p><p>With people reflecting on Rust in 2019 and what they want to see in 2020, error handling has come up again:</p>
<ul>
<li><a href="https://www.ncameron.org/blog/rust-in-2020-one-more-thing/">Rust in 2020, one more thing</a></li>
<li><a href="https://lukaskalbertodt.github.io/2019/11/14/thoughts-on-error-handling-in-rust.html">Thoughts on Error Handling in Rust</a></li>
<li><a href="https://blog.yoshuawuyts.com/error-handling-survey/">Error Handling Survey</a></li>
</ul>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2019/10/speeding-up-rust-builds-code-gen-edition/">Speeding Up Rust Builds: Code-Gen Edition</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Thu&nbsp;10&nbsp;Oct&nbsp;'19</time>
			
			<br/><i class="fa fa-tags"></i> programming, rust
			
		</li></ul>
	</nav>
	
	<p><p><em>tl;dr Cache your code-gen results with the <a href="https://crates.io/crates/codegenrs"><code>codegenrs</code> crate</a>.</em></p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2018/06/rustfest-2018/">RustFest Parist Trip Report</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Mon&nbsp;04&nbsp;Jun&nbsp;'18</time>
			
			<br/><i class="fa fa-tags"></i> programming, rust
			
		</li></ul>
	</nav>
	
	<p><p>I've been involved in the Rust community for about a year and a half now.  What
attracted me to Rust is that is looks like the first viable replacement for
C++.  It offers similar (actually better) protections than GCed languages and
the full language is available in any environment, including exception-like
error handling in the Windows kernel.</p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2018/05/pycon-2018/">PyCon 2018 Trip Report</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Fri&nbsp;18&nbsp;May&nbsp;'18</time>
			
			<br/><i class="fa fa-tags"></i> programming, python
			
		</li></ul>
	</nav>
	
	<p><p>I went to with a coworker to <a href="https://us.pycon.org/2018/">PyCon</a> this year (<a href="https://www.youtube.com/channel/UCsX05-2sVSH7Nx3zuk3NYuQ/videos">videos</a>).</p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2018/03/redefining-failure/">Redefining Failure</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Fri&nbsp;09&nbsp;Mar&nbsp;'18</time>
			
			<br/><i class="fa fa-tags"></i> programming, rust
			
		</li></ul>
	</nav>
	
	<p><p>I recently got the chance to redo the error handling in two different crates I
help maintain. For <a href="https://github.com/cobalt-org/liquid-rust"><code>liquid</code></a>, I decided to write the error types by
hand rather than use something like <a href="https://crates.io/crates/error-chain"><code>error-chain</code></a>. In the case
of <a href="https://github.com/assert-rs/assert_cli"><code>assert_cli</code></a>, I decided to finally give <a href="https://github.com/withoutboats/failure"><code>failure</code></a> a
try.</p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2018/01/crate-management/">Crate Management for #rust2018</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Fri&nbsp;26&nbsp;Jan&nbsp;'18</time>
			
			<br/><i class="fa fa-tags"></i> programming, rust
			
		</li></ul>
	</nav>
	
	<p><p><em>Context: <a href="https://blog.rust-lang.org/2018/01/03/new-years-rust-a-call-for-community-blogposts.html">Call for Community Posts</a> and <a href="http://readrust.net/rust2018/">other posts</a></em></p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2018/01/blog-transition/">Blog Transition</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Wed&nbsp;17&nbsp;Jan&nbsp;'18</time>
			
		</li></ul>
	</nav>
	
	<p><p>I'll post relevant items from my old blog.  If you'd like to see all the old posts, go to <a href="eopage.blogspot.com">eopage.blogspot.com</a></p>
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2017/01/shaky-start/">Off To A Shaky Start - LASIK and Nystagmus</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Mon&nbsp;30&nbsp;Jan&nbsp;'17</time>
			
			<br/><i class="fa fa-tags"></i> personal
			
		</li></ul>
	</nav>
	
	<p>My personal experience treating nystagmus
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2014/12/lone-star-hiking/">The Lone Star Hiking Trail</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Wed&nbsp;03&nbsp;Dec&nbsp;'14</time>
			
			<br/><i class="fa fa-tags"></i> hiking
			
		</li></ul>
	</nav>
	
	<p>Trip/equipment report for the Long Star Hiking Trail
</p>
	
</article>

<article>
	<nav>
		<ul><li>
			<h2><a href="/blog/2013/08/kings-peak/">On Top of Utah - Hiking to Kings Peak</a></h2>
		</li></ul>
		<ul><li>
			<i class="fa fa-calendar"></i> <time pubdate="pubdate">Sat&nbsp;17&nbsp;Aug&nbsp;'13</time>
			
			<br/><i class="fa fa-tags"></i> hiking
			
		</li></ul>
	</nav>
	
	<p>Trip/equipment report for Kings Peak in Utah
</p>
	
</article>


		</main>
			<nav>
		<ul>
			<li><a href="https://epage.github.io/about"><img class="footer-about" src="https://epage.github.io/img/me.jpg" alt="Headshot"/></a></li>
			<li>
				<a href="https://epage.github.io/rss.xml"><i class="fa fa-rss-square"></i> feed</a>
				<a href="https://github.com/epage"><i class="fa fa-github-square"></i> github</a>
				<a href="https://www.linkedin.com/in/eopage"><i class="fa fa-linkedin-square"></i> linkedin</a>
			</li>
		</ul>
		<ul>
			<li>
				<a href="https://epage.github.io/license">CC BY-SA 4.0 / MIT</a><br/>
			</li>
		</ul>
	</nav>

	</body>
</html>
